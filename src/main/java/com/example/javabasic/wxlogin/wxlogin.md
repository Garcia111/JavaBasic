微信扫码登录原理：


1.用户在浏览器端访问网页，网页中出现一个二维码；
    浏览器与微信服务器建立了一个连接，二维码中包含一个可唯一识别的字符串uuid,二维码其实是一个链接，当我们
    使用其他扫码工具进行解析时，可以等到类似下面这样的链接：
    https://login.weixin.qq.com/l/AfZJf7-ioA== 这其实是一个登录请求链接

2.用户拿着已经登陆成功的移动终端扫描该二维码；
    用户拿着客户端扫描该二维码时，客户端获取了该二维码中的uuid，并且与自身的账号进行绑定，并给出了
    访问令牌Token，随后网页版微信登录成功，可以进行信息交互了

3.浏览器中获得了移动终端已经登录的账号信息，并进行显示
    浏览器端获取了客户端已经登录的账号信息（是如何获得的？），并且显示头像，等待客户端点击确认登录。

4.在手机端点击确定登录，浏览器端登录网页版微信成功，可以进行交互
    客户单点击确认登录，将uuid+账号信息发送到微信服务器，微信服务器收到之后根据uuid找到该浏览器的访问请求页面


（1）polling和 long polling的区别：

	当浏览器端与服务器建立连接之后，一般有两种方式可以获取到服务器的更新信息，即polling和long polling。
    polling即轮询，是指浏览器通过周期性轮询，查看服务器是否有更新的信息；
    long polling指的是长轮询，浏览器与服务器建立连接之后，服务器将此连接进行挂起，但有更新信息时，再将信息发送给浏览器端。浏览器端重新建立连接，如此循环反复，这是一种长连接的方式。

    借用一个比较形象的例子：
	传统的polling一般是由C向S询问：“有我的信件吗？”。S接到询问之后，会立即查询，并且把查询结果告诉C，不管有没有C的信件，要么回复：“嗯，你有X封信。”，要么回复：“没，没有你的信”。

	而Long Polling更像是这样，C向S发出询问：“有我的信件吗？”，S开始查询，如果有则回复C：“嗯，有你x封信”。如果没有，则不作任何回复，而是让C等着，自己一遍一遍地查询是否有订阅者的信。

	换句话说：当S收到C的查询请求之后，Polling则只查询一次，并且把查询结果告诉C;而Long Polling收到请求之后，则会一遍一遍地查询，直到有消息才会响应C，不然一直hold Client。

    优缺点分析：
    轮询：客户端定时向服务器发送Ajax请求，服务器接到请求后马上返回响应信息并关闭连接。 
    优点：后端程序编写比较容易。 
    缺点：请求中有大半是无用，浪费带宽和服务器资源。 
    实例：适于小型应用。


    长轮询：客户端向服务器发送Ajax请求，服务器接到请求后hold住连接，直到有新消息才返回响应信息并关闭连接，客户端处理完响应信息后再向服务器发送新的请求。 
    优点：在无消息的情况下不会频繁的请求，耗费资源小。 
    缺点：服务器hold连接会消耗资源，返回数据顺序无保证，难于管理维护。 
    实例：WebQQ、Hi网页版、Facebook IM。


1.浏览器中向用户展示一个包含uuid的二维码时，浏览器与服务器建立了一个长连接，
2.客户端扫码，解析uuid，并将uuid与账号进行绑定，服务器端发现有相关uuid的新信息，将账号信息发送给浏览器进行显示
3.客户端点击登录之后，服务器向浏览器发送授权令牌Token











